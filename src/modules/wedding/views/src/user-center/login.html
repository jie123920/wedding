<?php
    use yii\helpers\Html;
    use yii\helpers\Url;
?>
<link href="<?=__CSS__?>/login_font.css" rel="stylesheet">
<style>
    *{
        text-decoration: none;
        list-style: none;
    }
    .page-body{overflow: hidden;}
    .page-container .main-content{padding: 0;} /*使iframe滚动条存在于最右边*/
    .main-content>div{margin-top: 20px;}
</style>
<style>
    /* body{background: #fefdf4;} */
    input,button,select,textarea{outline:none;autofill:none;}
    html{
        color:rgb(153, 153, 153) ;
    }
    .body{
        color: #616161!important;
        font-family: GARA;
    }
    .layer_text::-webkit-input-placeholder { /* WebKit browsers */
　　  color:#fff5e7;
　　}
    .layer_text:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
　　  color:#fff5e7;
　　}
　　.layer_text::-moz-placeholder { /* Mozilla Firefox 19+ */
　　color:#fff5e7;
　　}
　　.layer_text:-ms-input-placeholder { /* Internet Explorer 10+ */
　　color:#fff5e7;
　　}
    .layer_text{
        list-style: none;
        width: 448px;
        height:46px;
        font-size: 16px!important;
        color:#616161!important;
        border: 1px solid #94928e;
        font-family: GARA!important;
    }

    input[type="email"]{padding:6px;width:90%;color:#999;}
    input{
        outline:none;
    }
    .logins{
        /* margin:2% auto; */
        width: 410px;
        /* position: relative; */
        background: #fefdf4;
      float:left;
        
    }
    .registered{
        /* margin:5% auto; */
        width: 410px;
        position: relative;
        /* top: -683px;
        left: 650px; */
       background: #fefdf4;
       float:left;
       margin:0 15px;
    }
    .user_box{
        width: 380px;
        margin: auto;
    }
    .button {
        color: #fff;
        font-size: 22px;
        font-family: GARA;
        background: url('<?=__IMG__?>/btn_01.png');
        text-decoration: none;
        text-align: center;
        line-height: 68px;
        width: 220px;
        height: 68px;
        display: inline-block;
        appearance: none;
        cursor: pointer;
        border: none;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
 }
    .button:visited {
        color: #666; }

    .logo{
        text-align: center;
        margin-bottom: 5%;
    }
    .or{
        width: 405px;
        font-size: 16px;
        color: #8c8c8c;
        text-align: center;
        margin:56px auto 8px  auto;
        position: relative;
        display: none;
    }
    .or span{
        height: 20px;
        line-height: 20px;
        padding: 0 25px;
        display: inline-block;
        background: #0f1620;
        position: absolute;
        top: -10px;
        left: 170px;
    }
    .or i{
        width: 100%;
        height: 1px;
        overflow: hidden;
        background: #8c8c8c;
        position: absolute;
        top:50%;
        left:0;
        display: none;
    }
    .other_user{
        margin-top: 104px;
        font-family: "constanb";
 }
 div#other_user {
    margin-top: 60px;
}
    .other_user_o{
        margin-top: 102px;
        font-family: "constanb";
        margin-bottom: 31px;
    }
    span {
    font-family: "ebrima";
}
    .lian{
        color:#fff;
        font-size: 18px;
    }
    a{
        text-decoration: underline;
        /* color:#fff; */
    }
    .other_user .login_gg{
        width: 289px;
        height: 59px;
        text-align: center;
        font-size: 20px;
        text-indent: 63px;
        color:#fff;
        font-family: ebrima;
        line-height: 59px;
        background-image: url('<?=__IMG__?>/tt222.png');
    }
    .other_user_o .login_gg{
        width: 289px;
        height: 59px;
        text-align: center;
        font-size: 20px;
        text-indent: 63px;
        color:#fff;
        font-family: ebrima;
        line-height: 59px;
        background-image: url('<?=__IMG__?>/tt222.png');
    }
    .other_user .login_fb{
        width: 289px;
        height: 59px;
        font-size: 20px;
        text-indent: 70px;
        color:#fff;
        line-height: 58px;
        margin-bottom: 5px;
        font-family: ebrima;
        background-image: url('<?=__IMG__?>/feacebook_icon2.jpg');
    }
    .other_user_o .login_fb{
        width: 289px;
        height: 59px;
        font-size: 20px;
        text-indent: 74px;
        color:#fff;
        font-family: ebrima;
        line-height: 59px;
        margin-bottom: 5px;
        background-image: url('<?=__IMG__?>/feacebook_icon2.jpg');
    }
    .login_gg{
        width: 289px;
        height: 59px;
        text-align: center;
        font-size: 20px;
        text-indent: 63px;
        color:#fff;
        font-family: ebrima;
        line-height: 59px;
        background-image: url('<?=__IMG__?>/tt222.png');
    }
    .login_fb{
        width: 289px;
        height: 59px;
        font-size: 20px;
        text-indent: 40px;
        color:#fff;
        font-family: ebrima;
        line-height: 59px;
        margin-bottom: 5px;
        background-image: url('<?=__IMG__?>/feacebook_icon2.jpg');
    }
    .login a,.sign a {
        text-decoration: none;
        font-family: gara;
    }
    /* .registered .user_box li:nth-child(4) {
        display: none;
    } */
    .error{
        font-family:GARAIT ;
        color:#dc4e37;
        font-size: 14px;
        /* margin-top: 5px; */
    }
    .user_box ul li font a, .user_box ul li p a, .user_box ul li.zhuce a{
        font-size: 16px;
        color: #a7a7a7;
        font-family: ebrima;
    }
    .login_title{
        font-size: 30px;
        font-family: GARA;
        text-align: center;
        border-bottom: 1px solid;
        line-height: 78px;
        margin-bottom: 35px;
    }
    /* .login_title_o{
        font-size: 30px;
        font-family: GARA;
        text-align: center;
        border-bottom: 1px solid;
        line-height: 85px;
        margin-bottom: 38px;
    } */
    .login_co {
    width: 1280px;
    margin: 0 auto;
    padding-top: 15px;
}
.user_box ul li:nth-child(1),.user_box ul li:nth-child(2),.user_box ul li:nth-child(3){
                            height: 80px;
}
.user_box li:nth-child(5) {
    text-align: center;
}
li#li_o {
    margin-top: 81px;
}

.user_box li:nth-child(4) {
    text-align: center;
}

.user_box li:nth-child(3) {
    text-align: center;
}
.user_box li:nth-child(1) input,.user_box li:nth-child(2) input{
    text-indent: 10px;
}
.user_box li:nth-child(6) {
    padding-top: 10px;
}
    /* 弹出层 */
    .layer_box{display:none; height: auto; width:auto;}
    .layer{width: 565px;display:none; color:#fff;padding:25px 45px 35px; z-index:1; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;}
    .layer .guanbi{ position:absolute; top:20px; right:25px;}
    .layer .guanbi i{ font-size:30px; color:#616161;}
    .layer h2{ font-size:38px; color:#616161; text-align:center; font-weight:100; padding-bottom:30px;}
    .other_user{ text-align:center; margin-bottom:28px;}
    .retrieve .other_user{ text-align:left;}
    .other_user p{ padding:0 0 10px;}
    .other_user p,.layer .or{ font-size:16px; color:#616161;}
    .other_user a{ margin-top:8px; display:inline-block;}
    .other_user img{ vertical-align:top;}
    .layer .or{ position:relative; text-align:center; margin-bottom:5px;}
    .layer .or span{ height:20px; line-height:20px; padding:0 18px; display:inline-block; *display:inline; *zoom:1; background:#ffffff; position:relative; z-index:1;}
    .layer .or i{ position:absolute; width:100%; top:50%; left:0; height:1px; overflow:hidden; background:#8c8c8c;}
    .user_box ul li{ overflow:hidden; padding:10px 0; position:relative;}
    .layer_text{  border: 1px solid #8c8c8c;font-size:18px; padding:14px; height:50px; line-height:20px; color:#616161; width:100%; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;font-family: "constanb";}
    .layer_text:-ms-input-placeholder {
        　　color:#999;font-size:14px;
    }
    .layer_text::-webkit-input-placeholder {
        　　color:#999;font-size:14px;
    }
    .layer_text02{ width:60%;}
    .user_box ul li.yzm .layer_text02{ float:left;}
    .user_box ul li.yzm img{ vertical-align:top; height:50px; width:auto;}
    .user_box ul li label{ float:left;}
    .user_box ul li label input{ width:20px; height:20px; margin:0; vertical-align:top;margin-top: 5px;}
    .user_box ul li label span{ color:#a7a7a7; padding-left:6px; line-height:29px; font-size:16px;font-weight: normal}
    .user_box ul li font{ float:right;}
    .user_box ul li font a,.user_box ul li p a,.user_box ul li.zhuce a{ font-size:18px; color:#a7a7a7; text-decoration:underline; font-family: "ebrima"; }
    .user_box ul li.zhuce a{ font-size:14px;}
    .user_box ul li font a:hover,.user_box ul li p a:hover,.user_box ul li.zhuce a:hover{ text-decoration:none;}
    .user_box ul li p{ text-align:center;}
    .user_box ul li.forgot_password .layer_sub{font-size:16px;}
    .bj{ position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7) none repeat scroll 0 0 !important; filter: Alpha(opacity=70); background:#000;}

    .exit_tip{ padding:30px 10px 60px;}
    .exit_tip .fl{ width:50px; margin-left:20px;}
    .exit_tip .fl span{ display:block; height:50px; background:url(../images/exit_tip.jpg) no-repeat;}
    .exit_tip .fr{ font-family: "constanb"; font-size:18px; line-height:26px; float:none; padding-left:80px; display:block; text-align:left; margin-right:20px;color:#000000;}
    .exit_tip .sub_box{ float:none; clear:both; margin-top:45px;}
    .exit_tip .sub_box .sub{ width:159px; height:36px; line-height:36px; background:#000000; display:block; float:left; font-size:22px; font-weight:700; text-align:center; color:#fff;}
    .exit_tip .sub_box .sub02{ float:right;}
    .visitor{float:left;
        background: #fefdf4;
    width: 410px;
    height: 780px;}
    .visitor h1 {
    font-size: 30px;
    font-family: GARA;
    text-align: center;
    border-bottom: 1px solid;
    line-height: 78px;
    margin-bottom: 35px;
}
.visitor span {
    font-size: 16px;
    font-family: Gara;
}
.visitor span:nth-child(3) {
    display: block;
    text-align: center;
}
.visitor span:nth-child(2) {
    display: block;
    text-align: center;
}
.visitor span:nth-child(1) {
    display: block;
    text-align: center;
}
.visitor div {
    padding-top: 10px;
}
.visitor .button {
    margin-top: 56px;
    margin-left: 88px;
}
</style>
    <div class="login_co clearfix">
       
                    <div class="logins">
                        <!-- <div class="logo">
                            <a href="/"><img src="<?=__IMG__?>/logo.png" alt=""></a>
                        </div> -->
                        <h1 class="login_title"><?=Yii::t('common','login')?></h1>
                        <div class="user_box" style="position: relative;">
                            <form action="/ucenter/login" method="post" class='header_login_form'>
                                <ul>
                                    <li>
                                        
                                        <input id="login_email_input" name="email" type="text" placeholder="<?=Yii::t('common','Email')?>" class="layer_text">
                                    </li>
                                    <li>
                                        <span></span>
                                        <input id="login_pass_input" name="password" type="password" placeholder="<?=Yii::t('common','PasswordPrompt')?>" class="layer_text">
                                    </li>
                                    <li>
                                        <p>
                                            <label style="float: none">
                                                <input name="remeber_time" type="checkbox" value="30" checked>
                                                <span><?=Yii::t('common','Remember Me')?></span>
                                            </label>
                                        </p>
                                    <li>
                                        <p>
                                            <input type="submit" value="<?=Yii::t('common','login')?>" class="layer_sub button">
                                        </p>
                                    </li>
                                    <li><p><font style="float: none"><a href="javascript:showDialog('#pwd_email');"><?=Yii::t('common','Forgot Password')?></a></font></p></li>
                                </ul>
                            </form>
                        </div>
                        <div class="or"><i></i><span><?=Yii::t('common','or')?></span></div>
                        <div class="other_user_o" style="margin-left:172px;position: relative;left:-108px; ">
                            <div class="login_fb"><?=Yii::t('shop', 'Log in with Facebook')?></div>
                            <div class="login_gg"><?=Yii::t('shop', 'Log in with Google')?></div>
                            <iframe id="login_frame" src="<?=UCENTER_URL?>user/login?large=1" style="top:0;opacity:0;position:absolute;height:134px; width:310px; border:0; left:0;" scrolling="no" frameborder="0"></iframe>
                        </div>
                        <!-- <div class="lian">
                            <p><a style="display: block;text-align: center;color:#616161;font-family: GARA" href="/register<?=$this->params['referer']?'?referer='.$this->params['referer']:''?>">Create a new account</a></p>
                        </div> -->
                    </div>
              

        
                    <div class="registered">
                        <!-- <div class="logo">
                            <a href="/"><img src="<?=__IMG__?>/logos.png" alt=""></a>
                        </div> -->
                        <h1 class="login_title"><?=Yii::t('common','SignUp')?></h1>
                        <div class="user_box">
                            <form action="/ucenter/register" method="post" class="header_reg_form">
                                <ul>
                                    <li>
                                        <input id="reg_email_input" name="newemail" type="text" placeholder="<?=Yii::t('common','Email')?>" class="layer_text" id="reg_email">
                                    </li>
                                    <li class="clearfix">
                                        <input id="reg_pass_input" name="newpassword" type="password" id="password" placeholder="<?=Yii::t('common','PasswordPrompt')?>" class="layer_text">
                                    </li>
                                    <!-- <li>
                                        <p>
                                            <label style="float: none">
                                                <input name="remeber_time" type="checkbox" value="30" checked>
                                                <span><?=Yii::t('common','Remember Me')?></span>
                                            </label>
                                        </p>
                                    <li> -->
                                    <li class="zhuce" style="text-align: center" id="li_o">
                                        <input type="submit" value="<?=Yii::t('common','SignUp')?>" class="layer_sub button">
                                    </li>
                                     <li>
                                        <span style="font-size: 18px;color: #a7a7a7"><?=Yii::t('common','accept')?> <a href="/termsofuse" style="color: #616161"><?=Yii::t('common','terms')?></a> <?=Yii::t('common','playAge')?></span>
                                    </li>
                                </ul>
                            </form>
                        </div>
                        <div class="or"><i></i><span><?=Yii::t('common','or')?></span></div>
                        <div class="other_user" style="margin-left:172px;position: relative;left:-108px; ">
                            <div class="login_fb"><?=Yii::t('shop', 'Sign up with Facebook')?></div>
                            <div class="login_gg"><?=Yii::t('shop', 'Sign up with Google')?></div>
                            <iframe id="reg_iframe" src="<?=UCENTER_URL?>user/login?large=1" style="top:0;opacity:0;position:absolute;height:134px; width:310px; border:0;left:0;" scrolling="no" frameborder="0"></iframe>
                        </div>
                        <!-- <div class="lian">
                            <p><a style="display: block;text-align: center;color:#616161;font-family: GARA" href="/login<?=$this->params['referer']?'?referer='.$this->params['referer']:''?>"><?=Yii::t('common','account')?></a></p>
                        </div> -->
                    </div>



                        <div class="visitor">
                            <h1>Guest Checkout</h1>
                            <div>
                                <span>If you prefer shopping without registering.click below.</span>
                                <span> You can create an account later for checkout,</span>
                                <span> online order history,and more.</span>
                            </div>

                            <?php if(strstr($this->params['referer'],'/checkout')):?>
                                 <input type="submit" id="guest" value="Guest Checkout" class="button">
                            <?php else:?>
                                <input type="submit" id="guest" style="background: #a7a7a7"  disabled="disabled" value="Guest Checkout" class="button">
                            <?php endif;?>

                        </div>

            </div>
            <div class="layer">
                <div class="retrieve dialog_box" id="pwd_email">
                    <h2><?=Yii::t('common','Password')?></h2>
                    <div class="other_user" id="other_user">
                        <p><?=Yii::t('common','EnterEmail')?></p>
                    </div>
                    <div class="user_box">
                        <form action="/ucenter/getpassword" method="post" class="getPwd_form">
                            <ul>
                                <li><input name="email" type="text" placeholder="<?=Yii::t('common','Email')?>" class="layer_text"></li>
                                <li class="forgot_password"><p><input type="submit" value="<?=Yii::t('common','FindPassword')?>" class="layer_sub button"></p></li>
                            </ul>
                        </form>
                    </div>
                </div>
            </div>
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<script src="https://apis.google.com/js/client:platform.js?onload=start" async defer></script>
<script type="text/javascript" src="<?=__JS__?>/common.js"></script>

<script>
    document.domain = "<?=Yii::$app->params['COOKIE_DOMAIN']?>";

    var loginFacebookCallback = function(response){
        console.log("loginFacebookCallback:");
        console.log(response);
        $.post("/ucenter/loginfb", {token:response.authResponse.accessToken,app_type:"bycouturier"}, function(data){
            if (data.code > 0){
                layer_alert(data.error);
            }
            else{
            <?php if(isset($this->params['referer'])){?>
                    window.location.href='<?=$this->params['referer']?>';
                <?php }else{ ?>
                    location.reload();
                <?php } ?>
            }
        });
    }

    var loginGoogleCallback = function(authResult){
        console.log("loginGoogleCallback:");
        console.log(authResult);
        $.post("/ucenter/logingg", {code:authResult.code, app_type: "bycouturier"}, function(data){
            if (data.code > 0){
                layer_alert(data.error);
            }
            else{
            <?php if(isset($this->params['referer'])){?>
                    window.location.href='<?=$this->params['referer']?>';
                <?php }else{ ?>
                    location.reload();
                <?php } ?>
            }
        });
    }
</script>
<script>
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id))
            return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=<?=FB_VERSION?>&appId=<?=FB_APPID?>";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<script>
    function start() {
        gapi.load('auth2', function () {
            auth2 = gapi.auth2.init({
                client_id: '575102040378-biif7e23i59cktstauskmdjnqet8ujoq.apps.googleusercontent.com'
            })
        });
    }

    function open_recharge(){
        layer.alert('<?=\YII::t('common','rechargeAlert')?>',
        {title: false, btn: "", shadeClose: true, shade: [0.7, '#000'], offset: "auto", time: 2000});
    }

    window.fbAsyncInit = function () {
        FB.init({
            appId: '226427104556654',
            cookie: true, // This is important, it's not enabled by default
            version: '<?=FB_VERSION?>'
        });
    };
</script>
<script  type="text/javascript">
    $(function(){
        jQuery(".slideBox").slide({mainCell:".bd ul",effect:"fold",autoPlay:true,interTime:4000});
        TouchSlide({slideCell:"#focus",titCell:".hd ul",mainCell:".bd ul",effect:"leftLoop",autoPlay:true,autoPage:true,interTime:4000});
        function fangfa(){
            var bodyw=$(window).width();
            var bodyw=$('body').width();
            if( bodyw > 960 ){
                $('.pc_banner .bd ul,.pc_banner .bd li').width(bodyw);
                var imgh=$('.pc_banner .bd li').outerHeight();
                $('.pc_banner .bd ul').height(imgh)
            }
            //
            var main_box=$('.main_box'),rightH=main_box.find('.left_r').height();
            if( bodyw > 640 ){
                main_box.find('.facebook_con').css({height:rightH});
            }else{
                main_box.find('.facebook_con').css({height:'auto'});
            }
            //
            var role_box=$('.role_box .con'),scene_box=$('.scene_box .con');
            role_box.css({marginTop:-role_box.outerHeight()/2});
            scene_box.css({marginTop:-scene_box.outerHeight()/2});

            // xiaosong S
            //
            var imgH=$('.right_l_t').height();
            $('.facebook_big,.facebook_small').height(imgH);//imgH/5*2
            $('.in_video').height(imgH/5*3);
            // xiaosong E
        }
        window.onload=function(){fangfa()};
        $(window).resize(function(){fangfa()});

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-69020159-1', 'auto');
        ga('send', 'pageview');
    })
</script>

<script>
    var scrollTop = 0;
    function setscrollTop(){
        $('.focus img').each(function(index, el) {
            if ($(el).height() > 0) {
                scrollTop = $(el).height();
                return false;
            }
        });
    }


    $(function () {
        setscrollTop();
        $(window).bind('scroll', function(){
            var fixedHeight = 362;
            var bannerHeight = scrollTop;
            if($(document).scrollTop() + $(window).height() >= ($(window).height() - fixedHeight) / 2 + fixedHeight + bannerHeight + $('header').height()) {
                $('.side-share').css({"display":"block"});
                $('.side-share').stop().animate({"opacity":1},200);
            } else {
                $('.side-share').stop().animate({"opacity":0},200,function(){
                    $(this).css({"display":"none"});
                });
            }
        });

        $(window).resize(function () {
            setscrollTop();
        });

        $(".getPwd_form").validate({
            rules: {
                email: {
                    required: true,
                    email: true
                }
            },
            submitHandler: function (form)
            {
                getPwd_box_index = layer.msg('<?=Yii::t('common','Loading')?>', {icon: 16, time: 0, shadeClose: true, shade: [0.7, '#000']});
                $(form).ajaxSubmit({
                    success: getPwdResponse
                });
            }
        });

        function getPwdResponse(result)
        {
            layer.close(getPwd_box_index);
            if (result.error > 0)
            {
                layer.alert(result.msg, {title: false, btn: "", shadeClose: true, shade: [0.7, '#000'], offset: "auto", time: 2000});
            }
            else
            {
                layer.alert(result.msg, {title: false, btn: "", shadeClose: true, shade: [0.7, '#000'], offset: "auto", time: 2000, end: function (index) {
                    location.reload();
                }
                })
            }
        }

        $(".repwd_form").validate({
            rules: {
                password: {
                    required: true,
                    rangelength: [6, 20]
                },
                repassword: {
                    equalTo: "#rep_password"
                }
            },
            submitHandler: function (form)
            {
                rePwd_box_index = layer.msg('<?=Yii::t('common','Loading')?>', {icon: 16, time: 0, shadeClose: true, shade: [0.7, '#000']});
                $(form).ajaxSubmit({
                    success: rePwdResponse
                });
            }
        });

        function rePwdResponse(result)
        {
            layer.close(rePwd_box_index);
            if (result.error > 0)
            {
                layer.alert(result.msg, {title: false, btn: "", shadeClose: true, shade: [0.7, '#000'], offset: "auto", time: 2000, end: function (index) {
                    location.href = "/";
                }
                });
            }
            else
            {
                layer.alert(result.msg, {title: false, btn: "", shadeClose: true, shade: [0.7, '#000'], offset: "auto", time: 1000, end: function (index) {
                    location.href = "/";
                }
                });
            }
        }

        // $(".reg_form").validate({
        //     rules: {
        //         email: {
        //             required: true,
        //             email: true,
        //             remote: {
        //                 url: "/ucenter/checkuser",
        //                 type: "post",
        //                 dataType: "json"
        //             }
        //         },
        //         password: {
        //             required: true,
        //             rangelength: [6, 20]
        //         }
        //     },
        //     messages: {
        //         email: {
        //             remote: "Email already exists."
        //         }
        //     },
        //     submitHandler: function (form)
        //     {
        //         reg_box_index = layer.msg('<?=Yii::t('common','Loading')?>', {icon: 16, time: 0, shadeClose: true, shade: [0.7, '#000']});
        //         $(form).ajaxSubmit({
        //             success: regBoxResponse
        //         });
        //     }
        // });

        $(".header_reg_form").validate({
            rules: {
                newemail: {
                    required: true,
                    email: true,
                    remote: {
                        url: "/ucenter/checkuser",
                        type: "post",
                        dataType: "json"
                    }
                },
                newpassword: {
                    required: true,
                    rangelength: [6, 20]
                }
            },
            messages: {
                email: {
                    remote: "Email already exists."
                }
            },
            submitHandler: function (form)
            {
                reg_box_index = layer.msg('<?=Yii::t('common','Loading')?>', {icon: 16, time: 0, shadeClose: true, shade: [0.7, '#000']});
                $(form).ajaxSubmit({
                    success: regBoxResponse
                });
            }
        });

        // $(".login_form").validate({
        //     rules: {
        //         email: {
        //             required: true,
        //             email: true,
        //             remote: {
        //                 url: "/ucenter/checkuser",
        //                 type: "post",
        //                 dataType: "json",
        //                 data: {
        //                     type: "checked"
        //                 }
        //             }
        //         },
        //         password: {
        //             required: true,
        //             rangelength: [6, 20],
        //             remote: {
        //                 url: "/ucenter/checkpwd",
        //                 type: "post",
        //                 dataType: "json",
        //                 data: {
        //                     email: function () {
        //                         return $(".login_form input[name='email']").val();
        //                     }
        //                 }
        //             }
        //         }
        //     },
        //     messages: {
        //         email: {
        //             remote: "<?=Yii::t('common','emailNotFound')?>"
        //         },
        //         password: {
        //             remote: "<?=Yii::t('common','passwordError')?>"
        //         }
        //     },
        //     submitHandler: function (form)
        //     {
        //         logging_box_index = layer.msg('<?=Yii::t('common','Loading')?>', {icon: 16, time: 0, shade: [0.7, '#000']});
        //         $(form).ajaxSubmit({
        //             success: loginBoxResponse
        //         });
        //     }
        // });

        $(".header_login_form").validate({
            rules: {
                email: {
                    required: true,
                    email: true,
                    remote: {
                        url: "<?=Url::to(['/ucenter/checkuser']);?>",
                        type: "post",
                        dataType: "json",
                        data: {
                            type: "checked"
                        }
                    }
                },
                password: {
                    required: true,
                    rangelength: [6, 20],
                    remote: {
                        url: "/ucenter/checkpwd",
                        type: "post",
                        dataType: "json",
                        data: {
                            email: function () {
                                return $(".header_login_form input[name='email']").val();
                            }
                        }
                    }
                }
            },
            messages: {
                email: {
                    remote: "<?=Yii::t('common','emailNotFound')?>"
                },
                password: {
                    remote: "<?=Yii::t('common','passwordError')?>"
                }
            },
            submitHandler: function (form)
            {
                logging_box_index = layer.msg('<?=Yii::t('common','Loading')?>', {icon: 16, time: 0, shade: [0.7, '#000']});
                $(form).ajaxSubmit({
                    success: loginBoxResponse
                });
            }
        });
    })

    function regBoxResponse(result)
    {
        layer.close(reg_box_index);
        if (result.code > 0)
        {
            layer.alert('<?=Yii::t('common','passwordError')?>', {title: false, btn: "", shadeClose: true, shade: [0.7, '#000'], offset: "auto", time: 2000});
        }
        else
        {
            document.cookie="name="+"signup";  
             <?php if(isset($this->params['referer'])){?>
                        window.location.href='<?=$this->params['referer']?>';
                    <?php }else{ ?>
                        location.reload();
                    <?php } ?> 
            //GG GTM
            console.log('signup dataLayer:jump....')
            
            // dataLayer.push({
            //     'event': 'signup',
            //     'visitorType': 'high-value',
                   
            //              'eventCallback': function() {
                            
                  
  
                    
            //     }
                
                   
            // });
            
           

        }
    }



    function loginBoxResponse(result)
    {
        layer.close(logging_box_index);
        if (result.code > 0)
        {
            layer.alert('<?=Yii::t('common','passwordError')?>', {title: false, btn: "", shadeClose: true, shade: [0.7, '#000'], offset: "auto", time: 2000});
        }
        else
        {
            document.cookie="nam="+"login";  
            <?php if(isset($this->params['referer'])){?>
                        window.location.href='<?=$this->params['referer']?>';
                    <?php }else{ ?>
                        location.reload();
                    <?php } ?>
   
             
        }
    }


             //GG GTM
             console.log('login dataLayer:jump...')
          
            // dataLayer.push({
            //     'event': 'login',
            //     'visitorType': 'high-value',
                  
            //         'eventCallback': function() {



            //     }
              
                
            // });



    $("#guest").on("click",function () {
        window.location.href='<?=$this->params['referer']?>';
    })

</script>
